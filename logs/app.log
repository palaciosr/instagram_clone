[31mERROR[0m:    2025-12-08 10:43:19,404 - app - Query failed with: {e}
Traceback (most recent call last):
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 514, in _prepare_and_execute
    prepared_stmt, attributes = await adapt_connection._prepare(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 760, in _prepare
    prepared_stmt = await self._connection.prepare(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/asyncpg/connection.py", line 636, in prepare
    return await self._prepare(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/asyncpg/connection.py", line 654, in _prepare
    stmt = await self._get_statement(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/asyncpg/connection.py", line 433, in _get_statement
    statement = await self._protocol.prepare(
  File "asyncpg/protocol/protocol.pyx", line 166, in prepare
asyncpg.exceptions.UndefinedColumnError: column posts.file_name does not exist

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 572, in execute
    self._adapt_connection.await_(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 550, in _prepare_and_execute
    self._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 501, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 784, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.ProgrammingError: <class 'asyncpg.exceptions.UndefinedColumnError'>: column posts.file_name does not exist

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/app/domains/posts/repository.py", line 82, in get_feed
    result = await self.db.execute(q)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/ext/asyncio/session.py", line 461, in execute
    result = await greenlet_spawn(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2236, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
    result = conn.execute(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2353, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 572, in execute
    self._adapt_connection.await_(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 550, in _prepare_and_execute
    self._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 501, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 784, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.ProgrammingError: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>: column posts.file_name does not exist
[SQL: SELECT posts.id, posts.user_id, posts.caption, posts.created_at, posts.file_name, posts.image_data 
FROM posts ORDER BY posts.created_at DESC]
(Background on this error at: https://sqlalche.me/e/20/f405)
[31mERROR[0m:    2025-12-08 10:43:19,413 - app - DB went boom: {exc}
Traceback (most recent call last):
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 514, in _prepare_and_execute
    prepared_stmt, attributes = await adapt_connection._prepare(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 760, in _prepare
    prepared_stmt = await self._connection.prepare(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/asyncpg/connection.py", line 636, in prepare
    return await self._prepare(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/asyncpg/connection.py", line 654, in _prepare
    stmt = await self._get_statement(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/asyncpg/connection.py", line 433, in _get_statement
    statement = await self._protocol.prepare(
  File "asyncpg/protocol/protocol.pyx", line 166, in prepare
asyncpg.exceptions.UndefinedColumnError: column posts.file_name does not exist

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 572, in execute
    self._adapt_connection.await_(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 550, in _prepare_and_execute
    self._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 501, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 784, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.ProgrammingError: <class 'asyncpg.exceptions.UndefinedColumnError'>: column posts.file_name does not exist

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/app/core/db.py", line 17, in get_db
    yield session
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/app/domains/posts/router.py", line 31, in feed
    return await svc.feed()
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/app/domains/posts/service.py", line 21, in feed
    posts = await self.repo.get_feed()
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/app/domains/posts/repository.py", line 82, in get_feed
    result = await self.db.execute(q)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/ext/asyncio/session.py", line 461, in execute
    result = await greenlet_spawn(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2236, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
    result = conn.execute(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2353, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 572, in execute
    self._adapt_connection.await_(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 550, in _prepare_and_execute
    self._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 501, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 784, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.ProgrammingError: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>: column posts.file_name does not exist
[SQL: SELECT posts.id, posts.user_id, posts.caption, posts.created_at, posts.file_name, posts.image_data 
FROM posts ORDER BY posts.created_at DESC]
(Background on this error at: https://sqlalche.me/e/20/f405)
[31mERROR[0m:    2025-12-08 10:55:39,707 - app - Query failed with: {e}
Traceback (most recent call last):
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 514, in _prepare_and_execute
    prepared_stmt, attributes = await adapt_connection._prepare(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 760, in _prepare
    prepared_stmt = await self._connection.prepare(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/asyncpg/connection.py", line 636, in prepare
    return await self._prepare(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/asyncpg/connection.py", line 654, in _prepare
    stmt = await self._get_statement(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/asyncpg/connection.py", line 433, in _get_statement
    statement = await self._protocol.prepare(
  File "asyncpg/protocol/protocol.pyx", line 166, in prepare
asyncpg.exceptions.UndefinedColumnError: column posts.file_name does not exist

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 572, in execute
    self._adapt_connection.await_(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 550, in _prepare_and_execute
    self._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 501, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 784, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.ProgrammingError: <class 'asyncpg.exceptions.UndefinedColumnError'>: column posts.file_name does not exist

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/app/domains/posts/repository.py", line 82, in get_feed
    result = await self.db.execute(q)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/ext/asyncio/session.py", line 461, in execute
    result = await greenlet_spawn(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2236, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
    result = conn.execute(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2353, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 572, in execute
    self._adapt_connection.await_(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 550, in _prepare_and_execute
    self._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 501, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 784, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.ProgrammingError: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>: column posts.file_name does not exist
[SQL: SELECT posts.id, posts.user_id, posts.caption, posts.created_at, posts.file_name, posts.image_data 
FROM posts ORDER BY posts.created_at DESC]
(Background on this error at: https://sqlalche.me/e/20/f405)
[31mERROR[0m:    2025-12-08 10:55:39,714 - app - DB went boom: {exc}
Traceback (most recent call last):
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 514, in _prepare_and_execute
    prepared_stmt, attributes = await adapt_connection._prepare(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 760, in _prepare
    prepared_stmt = await self._connection.prepare(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/asyncpg/connection.py", line 636, in prepare
    return await self._prepare(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/asyncpg/connection.py", line 654, in _prepare
    stmt = await self._get_statement(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/asyncpg/connection.py", line 433, in _get_statement
    statement = await self._protocol.prepare(
  File "asyncpg/protocol/protocol.pyx", line 166, in prepare
asyncpg.exceptions.UndefinedColumnError: column posts.file_name does not exist

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 572, in execute
    self._adapt_connection.await_(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 550, in _prepare_and_execute
    self._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 501, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 784, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.ProgrammingError: <class 'asyncpg.exceptions.UndefinedColumnError'>: column posts.file_name does not exist

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/app/core/db.py", line 17, in get_db
    yield session
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/app/domains/posts/router.py", line 32, in feed
    return await svc.feed()
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/app/domains/posts/service.py", line 21, in feed
    posts = await self.repo.get_feed()
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/app/domains/posts/repository.py", line 82, in get_feed
    result = await self.db.execute(q)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/ext/asyncio/session.py", line 461, in execute
    result = await greenlet_spawn(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2236, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
    result = conn.execute(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2353, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 572, in execute
    self._adapt_connection.await_(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 550, in _prepare_and_execute
    self._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 501, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 784, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.ProgrammingError: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>: column posts.file_name does not exist
[SQL: SELECT posts.id, posts.user_id, posts.caption, posts.created_at, posts.file_name, posts.image_data 
FROM posts ORDER BY posts.created_at DESC]
(Background on this error at: https://sqlalche.me/e/20/f405)
[31mERROR[0m:    2025-12-08 11:24:53,829 - app - Query failed with: {e}
Traceback (most recent call last):
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 514, in _prepare_and_execute
    prepared_stmt, attributes = await adapt_connection._prepare(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 760, in _prepare
    prepared_stmt = await self._connection.prepare(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/asyncpg/connection.py", line 636, in prepare
    return await self._prepare(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/asyncpg/connection.py", line 654, in _prepare
    stmt = await self._get_statement(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/asyncpg/connection.py", line 433, in _get_statement
    statement = await self._protocol.prepare(
  File "asyncpg/protocol/protocol.pyx", line 166, in prepare
asyncpg.exceptions.UndefinedColumnError: column posts.file_name does not exist

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 572, in execute
    self._adapt_connection.await_(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 550, in _prepare_and_execute
    self._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 501, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 784, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.ProgrammingError: <class 'asyncpg.exceptions.UndefinedColumnError'>: column posts.file_name does not exist

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/app/domains/posts/repository.py", line 82, in get_feed
    result = await self.db.execute(q)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/ext/asyncio/session.py", line 461, in execute
    result = await greenlet_spawn(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2236, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
    result = conn.execute(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2353, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 572, in execute
    self._adapt_connection.await_(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 550, in _prepare_and_execute
    self._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 501, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 784, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.ProgrammingError: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>: column posts.file_name does not exist
[SQL: SELECT posts.id, posts.user_id, posts.caption, posts.created_at, posts.file_name, posts.image_data 
FROM posts ORDER BY posts.created_at DESC]
(Background on this error at: https://sqlalche.me/e/20/f405)
[31mERROR[0m:    2025-12-08 11:24:53,836 - app - DB went boom: {exc}
Traceback (most recent call last):
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 514, in _prepare_and_execute
    prepared_stmt, attributes = await adapt_connection._prepare(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 760, in _prepare
    prepared_stmt = await self._connection.prepare(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/asyncpg/connection.py", line 636, in prepare
    return await self._prepare(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/asyncpg/connection.py", line 654, in _prepare
    stmt = await self._get_statement(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/asyncpg/connection.py", line 433, in _get_statement
    statement = await self._protocol.prepare(
  File "asyncpg/protocol/protocol.pyx", line 166, in prepare
asyncpg.exceptions.UndefinedColumnError: column posts.file_name does not exist

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 572, in execute
    self._adapt_connection.await_(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 550, in _prepare_and_execute
    self._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 501, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 784, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.ProgrammingError: <class 'asyncpg.exceptions.UndefinedColumnError'>: column posts.file_name does not exist

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/app/core/db.py", line 17, in get_db
    yield session
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/app/domains/posts/router.py", line 32, in feed
    return await svc.feed()
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/app/domains/posts/service.py", line 21, in feed
    posts = await self.repo.get_feed()
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/app/domains/posts/repository.py", line 82, in get_feed
    result = await self.db.execute(q)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/ext/asyncio/session.py", line 461, in execute
    result = await greenlet_spawn(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2236, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
    result = conn.execute(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2353, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 572, in execute
    self._adapt_connection.await_(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 550, in _prepare_and_execute
    self._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 501, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 784, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.ProgrammingError: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>: column posts.file_name does not exist
[SQL: SELECT posts.id, posts.user_id, posts.caption, posts.created_at, posts.file_name, posts.image_data 
FROM posts ORDER BY posts.created_at DESC]
(Background on this error at: https://sqlalche.me/e/20/f405)
[31mERROR[0m:    2025-12-08 11:31:49,306 - app - Query failed with: {e}
Traceback (most recent call last):
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 514, in _prepare_and_execute
    prepared_stmt, attributes = await adapt_connection._prepare(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 760, in _prepare
    prepared_stmt = await self._connection.prepare(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/asyncpg/connection.py", line 636, in prepare
    return await self._prepare(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/asyncpg/connection.py", line 654, in _prepare
    stmt = await self._get_statement(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/asyncpg/connection.py", line 433, in _get_statement
    statement = await self._protocol.prepare(
  File "asyncpg/protocol/protocol.pyx", line 166, in prepare
asyncpg.exceptions.UndefinedColumnError: column posts.file_name does not exist

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 572, in execute
    self._adapt_connection.await_(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 550, in _prepare_and_execute
    self._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 501, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 784, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.ProgrammingError: <class 'asyncpg.exceptions.UndefinedColumnError'>: column posts.file_name does not exist

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/app/domains/posts/repository.py", line 82, in get_feed
    result = await self.db.execute(q)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/ext/asyncio/session.py", line 461, in execute
    result = await greenlet_spawn(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2236, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
    result = conn.execute(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2353, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 572, in execute
    self._adapt_connection.await_(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 550, in _prepare_and_execute
    self._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 501, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 784, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.ProgrammingError: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>: column posts.file_name does not exist
[SQL: SELECT posts.id, posts.user_id, posts.caption, posts.created_at, posts.file_name, posts.image_data 
FROM posts ORDER BY posts.created_at DESC]
(Background on this error at: https://sqlalche.me/e/20/f405)
[31mERROR[0m:    2025-12-08 11:31:49,314 - app - DB went boom: {exc}
Traceback (most recent call last):
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 514, in _prepare_and_execute
    prepared_stmt, attributes = await adapt_connection._prepare(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 760, in _prepare
    prepared_stmt = await self._connection.prepare(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/asyncpg/connection.py", line 636, in prepare
    return await self._prepare(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/asyncpg/connection.py", line 654, in _prepare
    stmt = await self._get_statement(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/asyncpg/connection.py", line 433, in _get_statement
    statement = await self._protocol.prepare(
  File "asyncpg/protocol/protocol.pyx", line 166, in prepare
asyncpg.exceptions.UndefinedColumnError: column posts.file_name does not exist

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 572, in execute
    self._adapt_connection.await_(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 550, in _prepare_and_execute
    self._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 501, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 784, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.ProgrammingError: <class 'asyncpg.exceptions.UndefinedColumnError'>: column posts.file_name does not exist

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/app/core/db.py", line 17, in get_db
    yield session
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/app/domains/posts/router.py", line 32, in feed
    return await svc.feed()
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/app/domains/posts/service.py", line 21, in feed
    posts = await self.repo.get_feed()
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/app/domains/posts/repository.py", line 82, in get_feed
    result = await self.db.execute(q)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/ext/asyncio/session.py", line 461, in execute
    result = await greenlet_spawn(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2236, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
    result = conn.execute(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2353, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 572, in execute
    self._adapt_connection.await_(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 550, in _prepare_and_execute
    self._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 501, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 784, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.ProgrammingError: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>: column posts.file_name does not exist
[SQL: SELECT posts.id, posts.user_id, posts.caption, posts.created_at, posts.file_name, posts.image_data 
FROM posts ORDER BY posts.created_at DESC]
(Background on this error at: https://sqlalche.me/e/20/f405)
[31mERROR[0m:    2025-12-08 13:41:10,488 - app - Query failed with: {e}
Traceback (most recent call last):
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 514, in _prepare_and_execute
    prepared_stmt, attributes = await adapt_connection._prepare(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 760, in _prepare
    prepared_stmt = await self._connection.prepare(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/asyncpg/connection.py", line 636, in prepare
    return await self._prepare(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/asyncpg/connection.py", line 654, in _prepare
    stmt = await self._get_statement(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/asyncpg/connection.py", line 433, in _get_statement
    statement = await self._protocol.prepare(
  File "asyncpg/protocol/protocol.pyx", line 166, in prepare
asyncpg.exceptions.UndefinedColumnError: column posts.file_name does not exist

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 572, in execute
    self._adapt_connection.await_(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 550, in _prepare_and_execute
    self._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 501, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 784, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.ProgrammingError: <class 'asyncpg.exceptions.UndefinedColumnError'>: column posts.file_name does not exist

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/app/domains/posts/repository.py", line 82, in get_feed
    result = await self.db.execute(q)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/ext/asyncio/session.py", line 461, in execute
    result = await greenlet_spawn(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2236, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
    result = conn.execute(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2353, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 572, in execute
    self._adapt_connection.await_(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 550, in _prepare_and_execute
    self._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 501, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 784, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.ProgrammingError: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>: column posts.file_name does not exist
[SQL: SELECT posts.id, posts.user_id, posts.caption, posts.created_at, posts.file_name, posts.image_data 
FROM posts ORDER BY posts.created_at DESC]
(Background on this error at: https://sqlalche.me/e/20/f405)
[31mERROR[0m:    2025-12-08 13:41:10,497 - app - DB went boom: {exc}
Traceback (most recent call last):
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 514, in _prepare_and_execute
    prepared_stmt, attributes = await adapt_connection._prepare(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 760, in _prepare
    prepared_stmt = await self._connection.prepare(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/asyncpg/connection.py", line 636, in prepare
    return await self._prepare(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/asyncpg/connection.py", line 654, in _prepare
    stmt = await self._get_statement(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/asyncpg/connection.py", line 433, in _get_statement
    statement = await self._protocol.prepare(
  File "asyncpg/protocol/protocol.pyx", line 166, in prepare
asyncpg.exceptions.UndefinedColumnError: column posts.file_name does not exist

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 572, in execute
    self._adapt_connection.await_(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 550, in _prepare_and_execute
    self._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 501, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 784, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.ProgrammingError: <class 'asyncpg.exceptions.UndefinedColumnError'>: column posts.file_name does not exist

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/app/core/db.py", line 17, in get_db
    yield session
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/app/domains/posts/router.py", line 32, in feed
    return await svc.feed()
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/app/domains/posts/service.py", line 21, in feed
    posts = await self.repo.get_feed()
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/app/domains/posts/repository.py", line 82, in get_feed
    result = await self.db.execute(q)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/ext/asyncio/session.py", line 461, in execute
    result = await greenlet_spawn(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2236, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
    result = conn.execute(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2353, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 572, in execute
    self._adapt_connection.await_(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 550, in _prepare_and_execute
    self._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 501, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 784, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.ProgrammingError: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>: column posts.file_name does not exist
[SQL: SELECT posts.id, posts.user_id, posts.caption, posts.created_at, posts.file_name, posts.image_data 
FROM posts ORDER BY posts.created_at DESC]
(Background on this error at: https://sqlalche.me/e/20/f405)
[31mERROR[0m:    2025-12-09 12:12:05,686 - app - Failed to read file: {e}
Traceback (most recent call last):
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/app/domains/posts/repository.py", line 24, in create
    file_name=file.filename, image_data=contents)
AttributeError: 'str' object has no attribute 'filename'
[31mERROR[0m:    2025-12-12 10:19:50,798 - app - Query failed with: {e}
Traceback (most recent call last):
  File "asyncpg/protocol/prepared_stmt.pyx", line 175, in asyncpg.protocol.protocol.PreparedStatementState._encode_bind_msg
  File "asyncpg/protocol/codecs/base.pyx", line 227, in asyncpg.protocol.protocol.Codec.encode
  File "asyncpg/protocol/codecs/base.pyx", line 129, in asyncpg.protocol.protocol.Codec.encode_scalar
  File "asyncpg/pgproto/./codecs/text.pyx", line 29, in asyncpg.pgproto.pgproto.text_encode
  File "asyncpg/pgproto/./codecs/text.pyx", line 12, in asyncpg.pgproto.pgproto.as_pg_string_and_size
TypeError: expected str, got PosixPath

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 538, in _prepare_and_execute
    self._rows = deque(await prepared_stmt.fetch(*parameters))
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/asyncpg/prepared_stmt.py", line 176, in fetch
    data = await self.__bind_execute(args, 0, timeout)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/asyncpg/prepared_stmt.py", line 241, in __bind_execute
    data, status, _ = await self.__do_execute(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/asyncpg/prepared_stmt.py", line 230, in __do_execute
    return await executor(protocol)
  File "asyncpg/protocol/protocol.pyx", line 186, in bind_execute
  File "asyncpg/protocol/prepared_stmt.pyx", line 204, in asyncpg.protocol.protocol.PreparedStatementState._encode_bind_msg
asyncpg.exceptions.DataError: invalid input for query argument $3: PosixPath('/app/static/uploaded_images/4... (expected str, got PosixPath)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 572, in execute
    self._adapt_connection.await_(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 550, in _prepare_and_execute
    self._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 501, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 784, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.Error: <class 'asyncpg.exceptions.DataError'>: invalid input for query argument $3: PosixPath('/app/static/uploaded_images/4... (expected str, got PosixPath)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/app/domains/posts/repository.py", line 45, in create
    await self.db.commit()
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/ext/asyncio/session.py", line 1009, in commit
    await greenlet_spawn(self.sync_session.commit)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2017, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1302, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1277, in _prepare_impl
    self.session.flush()
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4341, in flush
    self._flush(objects)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4476, in _flush
    with util.safe_reraise():
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4437, in _flush
    flush_context.execute()
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2353, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 572, in execute
    self._adapt_connection.await_(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 550, in _prepare_and_execute
    self._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 501, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 784, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.DBAPIError: (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.DataError'>: invalid input for query argument $3: PosixPath('/app/static/uploaded_images/4... (expected str, got PosixPath)
[SQL: INSERT INTO posts (user_id, caption, file_name, image_data) VALUES ($1::INTEGER, $2::VARCHAR, $3::VARCHAR, $4::BYTEA) RETURNING posts.id, posts.created_at]
[parameters: (3, None, PosixPath('/app/static/uploaded_images/4972015663144700691.jpg'), None)]
(Background on this error at: https://sqlalche.me/e/20/dbapi)
[31mERROR[0m:    2025-12-12 10:19:50,814 - app - DB went boom: {exc}
Traceback (most recent call last):
  File "asyncpg/protocol/prepared_stmt.pyx", line 175, in asyncpg.protocol.protocol.PreparedStatementState._encode_bind_msg
  File "asyncpg/protocol/codecs/base.pyx", line 227, in asyncpg.protocol.protocol.Codec.encode
  File "asyncpg/protocol/codecs/base.pyx", line 129, in asyncpg.protocol.protocol.Codec.encode_scalar
  File "asyncpg/pgproto/./codecs/text.pyx", line 29, in asyncpg.pgproto.pgproto.text_encode
  File "asyncpg/pgproto/./codecs/text.pyx", line 12, in asyncpg.pgproto.pgproto.as_pg_string_and_size
TypeError: expected str, got PosixPath

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 538, in _prepare_and_execute
    self._rows = deque(await prepared_stmt.fetch(*parameters))
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/asyncpg/prepared_stmt.py", line 176, in fetch
    data = await self.__bind_execute(args, 0, timeout)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/asyncpg/prepared_stmt.py", line 241, in __bind_execute
    data, status, _ = await self.__do_execute(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/asyncpg/prepared_stmt.py", line 230, in __do_execute
    return await executor(protocol)
  File "asyncpg/protocol/protocol.pyx", line 186, in bind_execute
  File "asyncpg/protocol/prepared_stmt.pyx", line 204, in asyncpg.protocol.protocol.PreparedStatementState._encode_bind_msg
asyncpg.exceptions.DataError: invalid input for query argument $3: PosixPath('/app/static/uploaded_images/4... (expected str, got PosixPath)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 572, in execute
    self._adapt_connection.await_(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 550, in _prepare_and_execute
    self._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 501, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 784, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.Error: <class 'asyncpg.exceptions.DataError'>: invalid input for query argument $3: PosixPath('/app/static/uploaded_images/4... (expected str, got PosixPath)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/app/core/db.py", line 17, in get_db
    yield session
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/app/domains/posts/router.py", line 31, in create_post
    return await svc.create_post(current.username, caption, filename)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/app/domains/posts/service.py", line 21, in create_post
    return await self.repo.create(user.id, caption, filename)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/app/domains/posts/repository.py", line 45, in create
    await self.db.commit()
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/ext/asyncio/session.py", line 1009, in commit
    await greenlet_spawn(self.sync_session.commit)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2017, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1302, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1277, in _prepare_impl
    self.session.flush()
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4341, in flush
    self._flush(objects)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4476, in _flush
    with util.safe_reraise():
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4437, in _flush
    flush_context.execute()
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2353, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 572, in execute
    self._adapt_connection.await_(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 550, in _prepare_and_execute
    self._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 501, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 784, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.DBAPIError: (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.DataError'>: invalid input for query argument $3: PosixPath('/app/static/uploaded_images/4... (expected str, got PosixPath)
[SQL: INSERT INTO posts (user_id, caption, file_name, image_data) VALUES ($1::INTEGER, $2::VARCHAR, $3::VARCHAR, $4::BYTEA) RETURNING posts.id, posts.created_at]
[parameters: (3, None, PosixPath('/app/static/uploaded_images/4972015663144700691.jpg'), None)]
(Background on this error at: https://sqlalche.me/e/20/dbapi)
[31mERROR[0m:    2025-12-12 10:40:24,612 - app - Failed to save image: {e}
Traceback (most recent call last):
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/app/domains/posts/repository.py", line 26, in save_image
    with open(full_path, "wb") as buffer:
FileNotFoundError: [Errno 2] No such file or directory: '/app/static/uploaded_images/4972015663144700691.jpg'
[31mERROR[0m:    2025-12-12 10:46:37,810 - app - Failed to save image: {e}
Traceback (most recent call last):
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/app/domains/posts/repository.py", line 26, in save_image
    with open(full_path, "wb+") as buffer:
FileNotFoundError: [Errno 2] No such file or directory: '/app/static/uploaded_images/4972015663144700691.jpg'
[31mERROR[0m:    2025-12-12 11:01:06,979 - app - Query failed with: {e}
Traceback (most recent call last):
  File "asyncpg/protocol/prepared_stmt.pyx", line 175, in asyncpg.protocol.protocol.PreparedStatementState._encode_bind_msg
  File "asyncpg/protocol/codecs/base.pyx", line 227, in asyncpg.protocol.protocol.Codec.encode
  File "asyncpg/protocol/codecs/base.pyx", line 129, in asyncpg.protocol.protocol.Codec.encode_scalar
  File "asyncpg/pgproto/./codecs/text.pyx", line 29, in asyncpg.pgproto.pgproto.text_encode
  File "asyncpg/pgproto/./codecs/text.pyx", line 12, in asyncpg.pgproto.pgproto.as_pg_string_and_size
TypeError: expected str, got PosixPath

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 538, in _prepare_and_execute
    self._rows = deque(await prepared_stmt.fetch(*parameters))
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/asyncpg/prepared_stmt.py", line 176, in fetch
    data = await self.__bind_execute(args, 0, timeout)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/asyncpg/prepared_stmt.py", line 241, in __bind_execute
    data, status, _ = await self.__do_execute(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/asyncpg/prepared_stmt.py", line 230, in __do_execute
    return await executor(protocol)
  File "asyncpg/protocol/protocol.pyx", line 186, in bind_execute
  File "asyncpg/protocol/prepared_stmt.pyx", line 204, in asyncpg.protocol.protocol.PreparedStatementState._encode_bind_msg
asyncpg.exceptions.DataError: invalid input for query argument $3: PosixPath('/Users/rodo/Desktop/instagram... (expected str, got PosixPath)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 572, in execute
    self._adapt_connection.await_(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 550, in _prepare_and_execute
    self._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 501, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 784, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.Error: <class 'asyncpg.exceptions.DataError'>: invalid input for query argument $3: PosixPath('/Users/rodo/Desktop/instagram... (expected str, got PosixPath)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/app/domains/posts/repository.py", line 70, in create
    await self.db.commit()
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/ext/asyncio/session.py", line 1009, in commit
    await greenlet_spawn(self.sync_session.commit)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2017, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1302, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1277, in _prepare_impl
    self.session.flush()
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4341, in flush
    self._flush(objects)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4476, in _flush
    with util.safe_reraise():
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4437, in _flush
    flush_context.execute()
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2353, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 572, in execute
    self._adapt_connection.await_(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 550, in _prepare_and_execute
    self._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 501, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 784, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.DBAPIError: (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.DataError'>: invalid input for query argument $3: PosixPath('/Users/rodo/Desktop/instagram... (expected str, got PosixPath)
[SQL: INSERT INTO posts (user_id, caption, file_name, image_data) VALUES ($1::INTEGER, $2::VARCHAR, $3::VARCHAR, $4::BYTEA) RETURNING posts.id, posts.created_at]
[parameters: (3, None, PosixPath('/Users/rodo/Desktop/instagram_design/instagram_clone/app/static/uploaded_images/4972015663144700691.jpg'), None)]
(Background on this error at: https://sqlalche.me/e/20/dbapi)
[31mERROR[0m:    2025-12-12 11:01:06,994 - app - DB went boom: {exc}
Traceback (most recent call last):
  File "asyncpg/protocol/prepared_stmt.pyx", line 175, in asyncpg.protocol.protocol.PreparedStatementState._encode_bind_msg
  File "asyncpg/protocol/codecs/base.pyx", line 227, in asyncpg.protocol.protocol.Codec.encode
  File "asyncpg/protocol/codecs/base.pyx", line 129, in asyncpg.protocol.protocol.Codec.encode_scalar
  File "asyncpg/pgproto/./codecs/text.pyx", line 29, in asyncpg.pgproto.pgproto.text_encode
  File "asyncpg/pgproto/./codecs/text.pyx", line 12, in asyncpg.pgproto.pgproto.as_pg_string_and_size
TypeError: expected str, got PosixPath

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 538, in _prepare_and_execute
    self._rows = deque(await prepared_stmt.fetch(*parameters))
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/asyncpg/prepared_stmt.py", line 176, in fetch
    data = await self.__bind_execute(args, 0, timeout)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/asyncpg/prepared_stmt.py", line 241, in __bind_execute
    data, status, _ = await self.__do_execute(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/asyncpg/prepared_stmt.py", line 230, in __do_execute
    return await executor(protocol)
  File "asyncpg/protocol/protocol.pyx", line 186, in bind_execute
  File "asyncpg/protocol/prepared_stmt.pyx", line 204, in asyncpg.protocol.protocol.PreparedStatementState._encode_bind_msg
asyncpg.exceptions.DataError: invalid input for query argument $3: PosixPath('/Users/rodo/Desktop/instagram... (expected str, got PosixPath)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 572, in execute
    self._adapt_connection.await_(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 550, in _prepare_and_execute
    self._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 501, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 784, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.Error: <class 'asyncpg.exceptions.DataError'>: invalid input for query argument $3: PosixPath('/Users/rodo/Desktop/instagram... (expected str, got PosixPath)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/app/core/db.py", line 17, in get_db
    yield session
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/app/domains/posts/router.py", line 31, in create_post
    return await svc.create_post(current.username, caption, file)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/app/domains/posts/service.py", line 21, in create_post
    return await self.repo.create(user.id, caption, file)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/app/domains/posts/repository.py", line 70, in create
    await self.db.commit()
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/ext/asyncio/session.py", line 1009, in commit
    await greenlet_spawn(self.sync_session.commit)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2017, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1302, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1277, in _prepare_impl
    self.session.flush()
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4341, in flush
    self._flush(objects)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4476, in _flush
    with util.safe_reraise():
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4437, in _flush
    flush_context.execute()
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2353, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 572, in execute
    self._adapt_connection.await_(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 550, in _prepare_and_execute
    self._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 501, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 784, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.DBAPIError: (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.DataError'>: invalid input for query argument $3: PosixPath('/Users/rodo/Desktop/instagram... (expected str, got PosixPath)
[SQL: INSERT INTO posts (user_id, caption, file_name, image_data) VALUES ($1::INTEGER, $2::VARCHAR, $3::VARCHAR, $4::BYTEA) RETURNING posts.id, posts.created_at]
[parameters: (3, None, PosixPath('/Users/rodo/Desktop/instagram_design/instagram_clone/app/static/uploaded_images/4972015663144700691.jpg'), None)]
(Background on this error at: https://sqlalche.me/e/20/dbapi)
[31mERROR[0m:    2025-12-12 11:03:26,291 - app - Query failed with: {e}
Traceback (most recent call last):
  File "asyncpg/protocol/prepared_stmt.pyx", line 175, in asyncpg.protocol.protocol.PreparedStatementState._encode_bind_msg
  File "asyncpg/protocol/codecs/base.pyx", line 227, in asyncpg.protocol.protocol.Codec.encode
  File "asyncpg/protocol/codecs/base.pyx", line 129, in asyncpg.protocol.protocol.Codec.encode_scalar
  File "asyncpg/pgproto/./codecs/text.pyx", line 29, in asyncpg.pgproto.pgproto.text_encode
  File "asyncpg/pgproto/./codecs/text.pyx", line 12, in asyncpg.pgproto.pgproto.as_pg_string_and_size
TypeError: expected str, got PosixPath

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 538, in _prepare_and_execute
    self._rows = deque(await prepared_stmt.fetch(*parameters))
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/asyncpg/prepared_stmt.py", line 176, in fetch
    data = await self.__bind_execute(args, 0, timeout)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/asyncpg/prepared_stmt.py", line 241, in __bind_execute
    data, status, _ = await self.__do_execute(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/asyncpg/prepared_stmt.py", line 230, in __do_execute
    return await executor(protocol)
  File "asyncpg/protocol/protocol.pyx", line 186, in bind_execute
  File "asyncpg/protocol/prepared_stmt.pyx", line 204, in asyncpg.protocol.protocol.PreparedStatementState._encode_bind_msg
asyncpg.exceptions.DataError: invalid input for query argument $3: PosixPath('/Users/rodo/Desktop/instagram... (expected str, got PosixPath)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 572, in execute
    self._adapt_connection.await_(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 550, in _prepare_and_execute
    self._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 501, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 784, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.Error: <class 'asyncpg.exceptions.DataError'>: invalid input for query argument $3: PosixPath('/Users/rodo/Desktop/instagram... (expected str, got PosixPath)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/app/domains/posts/repository.py", line 74, in create
    await self.db.commit()
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/ext/asyncio/session.py", line 1009, in commit
    await greenlet_spawn(self.sync_session.commit)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2017, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1302, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1277, in _prepare_impl
    self.session.flush()
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4341, in flush
    self._flush(objects)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4476, in _flush
    with util.safe_reraise():
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4437, in _flush
    flush_context.execute()
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2353, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 572, in execute
    self._adapt_connection.await_(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 550, in _prepare_and_execute
    self._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 501, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 784, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.DBAPIError: (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.DataError'>: invalid input for query argument $3: PosixPath('/Users/rodo/Desktop/instagram... (expected str, got PosixPath)
[SQL: INSERT INTO posts (user_id, caption, file_name, image_data) VALUES ($1::INTEGER, $2::VARCHAR, $3::VARCHAR, $4::BYTEA) RETURNING posts.id, posts.created_at]
[parameters: (3, None, PosixPath('/Users/rodo/Desktop/instagram_design/instagram_clone/app/static/uploaded_images/4972015663144700691.jpg'), None)]
(Background on this error at: https://sqlalche.me/e/20/dbapi)
[31mERROR[0m:    2025-12-12 11:03:26,299 - app - DB went boom: {exc}
Traceback (most recent call last):
  File "asyncpg/protocol/prepared_stmt.pyx", line 175, in asyncpg.protocol.protocol.PreparedStatementState._encode_bind_msg
  File "asyncpg/protocol/codecs/base.pyx", line 227, in asyncpg.protocol.protocol.Codec.encode
  File "asyncpg/protocol/codecs/base.pyx", line 129, in asyncpg.protocol.protocol.Codec.encode_scalar
  File "asyncpg/pgproto/./codecs/text.pyx", line 29, in asyncpg.pgproto.pgproto.text_encode
  File "asyncpg/pgproto/./codecs/text.pyx", line 12, in asyncpg.pgproto.pgproto.as_pg_string_and_size
TypeError: expected str, got PosixPath

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 538, in _prepare_and_execute
    self._rows = deque(await prepared_stmt.fetch(*parameters))
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/asyncpg/prepared_stmt.py", line 176, in fetch
    data = await self.__bind_execute(args, 0, timeout)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/asyncpg/prepared_stmt.py", line 241, in __bind_execute
    data, status, _ = await self.__do_execute(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/asyncpg/prepared_stmt.py", line 230, in __do_execute
    return await executor(protocol)
  File "asyncpg/protocol/protocol.pyx", line 186, in bind_execute
  File "asyncpg/protocol/prepared_stmt.pyx", line 204, in asyncpg.protocol.protocol.PreparedStatementState._encode_bind_msg
asyncpg.exceptions.DataError: invalid input for query argument $3: PosixPath('/Users/rodo/Desktop/instagram... (expected str, got PosixPath)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 572, in execute
    self._adapt_connection.await_(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 550, in _prepare_and_execute
    self._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 501, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 784, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.Error: <class 'asyncpg.exceptions.DataError'>: invalid input for query argument $3: PosixPath('/Users/rodo/Desktop/instagram... (expected str, got PosixPath)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/app/core/db.py", line 17, in get_db
    yield session
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/app/domains/posts/router.py", line 31, in create_post
    return await svc.create_post(current.username, caption, file)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/app/domains/posts/service.py", line 21, in create_post
    return await self.repo.create(user.id, caption, file)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/app/domains/posts/repository.py", line 74, in create
    await self.db.commit()
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/ext/asyncio/session.py", line 1009, in commit
    await greenlet_spawn(self.sync_session.commit)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2017, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1302, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1277, in _prepare_impl
    self.session.flush()
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4341, in flush
    self._flush(objects)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4476, in _flush
    with util.safe_reraise():
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4437, in _flush
    flush_context.execute()
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2353, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 572, in execute
    self._adapt_connection.await_(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 550, in _prepare_and_execute
    self._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 501, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 784, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.DBAPIError: (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.DataError'>: invalid input for query argument $3: PosixPath('/Users/rodo/Desktop/instagram... (expected str, got PosixPath)
[SQL: INSERT INTO posts (user_id, caption, file_name, image_data) VALUES ($1::INTEGER, $2::VARCHAR, $3::VARCHAR, $4::BYTEA) RETURNING posts.id, posts.created_at]
[parameters: (3, None, PosixPath('/Users/rodo/Desktop/instagram_design/instagram_clone/app/static/uploaded_images/4972015663144700691.jpg'), None)]
(Background on this error at: https://sqlalche.me/e/20/dbapi)
[31mERROR[0m:    2025-12-12 15:25:01,837 - app - Query failed with: {e}
Traceback (most recent call last):
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 514, in _prepare_and_execute
    prepared_stmt, attributes = await adapt_connection._prepare(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 760, in _prepare
    prepared_stmt = await self._connection.prepare(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/asyncpg/connection.py", line 636, in prepare
    return await self._prepare(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/asyncpg/connection.py", line 654, in _prepare
    stmt = await self._get_statement(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/asyncpg/connection.py", line 433, in _get_statement
    statement = await self._protocol.prepare(
  File "asyncpg/protocol/protocol.pyx", line 166, in prepare
asyncpg.exceptions.UndefinedFunctionError: operator does not exist: integer = character varying
HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 572, in execute
    self._adapt_connection.await_(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 550, in _prepare_and_execute
    self._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 501, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 784, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.ProgrammingError: <class 'asyncpg.exceptions.UndefinedFunctionError'>: operator does not exist: integer = character varying
HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/app/domains/posts/repository.py", line 123, in get_image
    result = await self.db.execute(select(Post).where(Post.id == post_id))
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/ext/asyncio/session.py", line 461, in execute
    result = await greenlet_spawn(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2236, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
    result = conn.execute(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2353, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 572, in execute
    self._adapt_connection.await_(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 550, in _prepare_and_execute
    self._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 501, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 784, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.ProgrammingError: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedFunctionError'>: operator does not exist: integer = character varying
HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
[SQL: SELECT posts.id, posts.user_id, posts.caption, posts.created_at, posts.file_name, posts.image_data 
FROM posts 
WHERE posts.id = $1::VARCHAR]
[parameters: ('41',)]
(Background on this error at: https://sqlalche.me/e/20/f405)
[31mERROR[0m:    2025-12-12 15:25:01,844 - app - Failed to retrieve image: {e}
Traceback (most recent call last):
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 514, in _prepare_and_execute
    prepared_stmt, attributes = await adapt_connection._prepare(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 760, in _prepare
    prepared_stmt = await self._connection.prepare(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/asyncpg/connection.py", line 636, in prepare
    return await self._prepare(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/asyncpg/connection.py", line 654, in _prepare
    stmt = await self._get_statement(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/asyncpg/connection.py", line 433, in _get_statement
    statement = await self._protocol.prepare(
  File "asyncpg/protocol/protocol.pyx", line 166, in prepare
asyncpg.exceptions.UndefinedFunctionError: operator does not exist: integer = character varying
HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 572, in execute
    self._adapt_connection.await_(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 550, in _prepare_and_execute
    self._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 501, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 784, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.ProgrammingError: <class 'asyncpg.exceptions.UndefinedFunctionError'>: operator does not exist: integer = character varying
HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/app/domains/posts/repository.py", line 123, in get_image
    result = await self.db.execute(select(Post).where(Post.id == post_id))
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/ext/asyncio/session.py", line 461, in execute
    result = await greenlet_spawn(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2236, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
    result = conn.execute(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2353, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 572, in execute
    self._adapt_connection.await_(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 550, in _prepare_and_execute
    self._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 501, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 784, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.ProgrammingError: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedFunctionError'>: operator does not exist: integer = character varying
HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
[SQL: SELECT posts.id, posts.user_id, posts.caption, posts.created_at, posts.file_name, posts.image_data 
FROM posts 
WHERE posts.id = $1::VARCHAR]
[parameters: ('41',)]
(Background on this error at: https://sqlalche.me/e/20/f405)
[31mERROR[0m:    2025-12-12 15:25:01,860 - app - Query failed with: {e}
Traceback (most recent call last):
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 514, in _prepare_and_execute
    prepared_stmt, attributes = await adapt_connection._prepare(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 760, in _prepare
    prepared_stmt = await self._connection.prepare(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/asyncpg/connection.py", line 636, in prepare
    return await self._prepare(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/asyncpg/connection.py", line 654, in _prepare
    stmt = await self._get_statement(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/asyncpg/connection.py", line 433, in _get_statement
    statement = await self._protocol.prepare(
  File "asyncpg/protocol/protocol.pyx", line 166, in prepare
asyncpg.exceptions.UndefinedFunctionError: operator does not exist: integer = character varying
HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 572, in execute
    self._adapt_connection.await_(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 550, in _prepare_and_execute
    self._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 501, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 784, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.ProgrammingError: <class 'asyncpg.exceptions.UndefinedFunctionError'>: operator does not exist: integer = character varying
HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/app/domains/posts/repository.py", line 123, in get_image
    result = await self.db.execute(select(Post).where(Post.id == post_id))
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/ext/asyncio/session.py", line 461, in execute
    result = await greenlet_spawn(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2236, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
    result = conn.execute(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2353, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 572, in execute
    self._adapt_connection.await_(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 550, in _prepare_and_execute
    self._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 501, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 784, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.ProgrammingError: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedFunctionError'>: operator does not exist: integer = character varying
HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
[SQL: SELECT posts.id, posts.user_id, posts.caption, posts.created_at, posts.file_name, posts.image_data 
FROM posts 
WHERE posts.id = $1::VARCHAR]
[parameters: ('37',)]
(Background on this error at: https://sqlalche.me/e/20/f405)
[31mERROR[0m:    2025-12-12 15:25:01,861 - app - Failed to retrieve image: {e}
Traceback (most recent call last):
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 514, in _prepare_and_execute
    prepared_stmt, attributes = await adapt_connection._prepare(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 760, in _prepare
    prepared_stmt = await self._connection.prepare(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/asyncpg/connection.py", line 636, in prepare
    return await self._prepare(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/asyncpg/connection.py", line 654, in _prepare
    stmt = await self._get_statement(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/asyncpg/connection.py", line 433, in _get_statement
    statement = await self._protocol.prepare(
  File "asyncpg/protocol/protocol.pyx", line 166, in prepare
asyncpg.exceptions.UndefinedFunctionError: operator does not exist: integer = character varying
HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 572, in execute
    self._adapt_connection.await_(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 550, in _prepare_and_execute
    self._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 501, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 784, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.ProgrammingError: <class 'asyncpg.exceptions.UndefinedFunctionError'>: operator does not exist: integer = character varying
HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/app/domains/posts/repository.py", line 123, in get_image
    result = await self.db.execute(select(Post).where(Post.id == post_id))
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/ext/asyncio/session.py", line 461, in execute
    result = await greenlet_spawn(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2236, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
    result = conn.execute(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2353, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 572, in execute
    self._adapt_connection.await_(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 550, in _prepare_and_execute
    self._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 501, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 784, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.ProgrammingError: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedFunctionError'>: operator does not exist: integer = character varying
HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
[SQL: SELECT posts.id, posts.user_id, posts.caption, posts.created_at, posts.file_name, posts.image_data 
FROM posts 
WHERE posts.id = $1::VARCHAR]
[parameters: ('37',)]
(Background on this error at: https://sqlalche.me/e/20/f405)
[31mERROR[0m:    2025-12-12 15:25:01,862 - app - Query failed with: {e}
Traceback (most recent call last):
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 514, in _prepare_and_execute
    prepared_stmt, attributes = await adapt_connection._prepare(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 760, in _prepare
    prepared_stmt = await self._connection.prepare(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/asyncpg/connection.py", line 636, in prepare
    return await self._prepare(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/asyncpg/connection.py", line 654, in _prepare
    stmt = await self._get_statement(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/asyncpg/connection.py", line 433, in _get_statement
    statement = await self._protocol.prepare(
  File "asyncpg/protocol/protocol.pyx", line 166, in prepare
asyncpg.exceptions.UndefinedFunctionError: operator does not exist: integer = character varying
HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 572, in execute
    self._adapt_connection.await_(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 550, in _prepare_and_execute
    self._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 501, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 784, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.ProgrammingError: <class 'asyncpg.exceptions.UndefinedFunctionError'>: operator does not exist: integer = character varying
HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/app/domains/posts/repository.py", line 123, in get_image
    result = await self.db.execute(select(Post).where(Post.id == post_id))
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/ext/asyncio/session.py", line 461, in execute
    result = await greenlet_spawn(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2236, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
    result = conn.execute(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2353, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 572, in execute
    self._adapt_connection.await_(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 550, in _prepare_and_execute
    self._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 501, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 784, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.ProgrammingError: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedFunctionError'>: operator does not exist: integer = character varying
HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
[SQL: SELECT posts.id, posts.user_id, posts.caption, posts.created_at, posts.file_name, posts.image_data 
FROM posts 
WHERE posts.id = $1::VARCHAR]
[parameters: ('36',)]
(Background on this error at: https://sqlalche.me/e/20/f405)
[31mERROR[0m:    2025-12-12 15:25:01,863 - app - Failed to retrieve image: {e}
Traceback (most recent call last):
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 514, in _prepare_and_execute
    prepared_stmt, attributes = await adapt_connection._prepare(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 760, in _prepare
    prepared_stmt = await self._connection.prepare(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/asyncpg/connection.py", line 636, in prepare
    return await self._prepare(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/asyncpg/connection.py", line 654, in _prepare
    stmt = await self._get_statement(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/asyncpg/connection.py", line 433, in _get_statement
    statement = await self._protocol.prepare(
  File "asyncpg/protocol/protocol.pyx", line 166, in prepare
asyncpg.exceptions.UndefinedFunctionError: operator does not exist: integer = character varying
HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 572, in execute
    self._adapt_connection.await_(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 550, in _prepare_and_execute
    self._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 501, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 784, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.ProgrammingError: <class 'asyncpg.exceptions.UndefinedFunctionError'>: operator does not exist: integer = character varying
HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/app/domains/posts/repository.py", line 123, in get_image
    result = await self.db.execute(select(Post).where(Post.id == post_id))
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/ext/asyncio/session.py", line 461, in execute
    result = await greenlet_spawn(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2236, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
    result = conn.execute(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2353, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 572, in execute
    self._adapt_connection.await_(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 550, in _prepare_and_execute
    self._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 501, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 784, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.ProgrammingError: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedFunctionError'>: operator does not exist: integer = character varying
HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
[SQL: SELECT posts.id, posts.user_id, posts.caption, posts.created_at, posts.file_name, posts.image_data 
FROM posts 
WHERE posts.id = $1::VARCHAR]
[parameters: ('36',)]
(Background on this error at: https://sqlalche.me/e/20/f405)
[31mERROR[0m:    2025-12-12 15:25:01,864 - app - Query failed with: {e}
Traceback (most recent call last):
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 514, in _prepare_and_execute
    prepared_stmt, attributes = await adapt_connection._prepare(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 760, in _prepare
    prepared_stmt = await self._connection.prepare(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/asyncpg/connection.py", line 636, in prepare
    return await self._prepare(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/asyncpg/connection.py", line 654, in _prepare
    stmt = await self._get_statement(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/asyncpg/connection.py", line 433, in _get_statement
    statement = await self._protocol.prepare(
  File "asyncpg/protocol/protocol.pyx", line 166, in prepare
asyncpg.exceptions.UndefinedFunctionError: operator does not exist: integer = character varying
HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 572, in execute
    self._adapt_connection.await_(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 550, in _prepare_and_execute
    self._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 501, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 784, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.ProgrammingError: <class 'asyncpg.exceptions.UndefinedFunctionError'>: operator does not exist: integer = character varying
HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/app/domains/posts/repository.py", line 123, in get_image
    result = await self.db.execute(select(Post).where(Post.id == post_id))
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/ext/asyncio/session.py", line 461, in execute
    result = await greenlet_spawn(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2236, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
    result = conn.execute(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2353, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 572, in execute
    self._adapt_connection.await_(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 550, in _prepare_and_execute
    self._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 501, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 784, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.ProgrammingError: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedFunctionError'>: operator does not exist: integer = character varying
HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
[SQL: SELECT posts.id, posts.user_id, posts.caption, posts.created_at, posts.file_name, posts.image_data 
FROM posts 
WHERE posts.id = $1::VARCHAR]
[parameters: ('38',)]
(Background on this error at: https://sqlalche.me/e/20/f405)
[31mERROR[0m:    2025-12-12 15:25:01,864 - app - Failed to retrieve image: {e}
Traceback (most recent call last):
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 514, in _prepare_and_execute
    prepared_stmt, attributes = await adapt_connection._prepare(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 760, in _prepare
    prepared_stmt = await self._connection.prepare(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/asyncpg/connection.py", line 636, in prepare
    return await self._prepare(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/asyncpg/connection.py", line 654, in _prepare
    stmt = await self._get_statement(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/asyncpg/connection.py", line 433, in _get_statement
    statement = await self._protocol.prepare(
  File "asyncpg/protocol/protocol.pyx", line 166, in prepare
asyncpg.exceptions.UndefinedFunctionError: operator does not exist: integer = character varying
HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 572, in execute
    self._adapt_connection.await_(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 550, in _prepare_and_execute
    self._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 501, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 784, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.ProgrammingError: <class 'asyncpg.exceptions.UndefinedFunctionError'>: operator does not exist: integer = character varying
HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/app/domains/posts/repository.py", line 123, in get_image
    result = await self.db.execute(select(Post).where(Post.id == post_id))
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/ext/asyncio/session.py", line 461, in execute
    result = await greenlet_spawn(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2236, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
    result = conn.execute(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2353, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 572, in execute
    self._adapt_connection.await_(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 550, in _prepare_and_execute
    self._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 501, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 784, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.ProgrammingError: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedFunctionError'>: operator does not exist: integer = character varying
HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
[SQL: SELECT posts.id, posts.user_id, posts.caption, posts.created_at, posts.file_name, posts.image_data 
FROM posts 
WHERE posts.id = $1::VARCHAR]
[parameters: ('38',)]
(Background on this error at: https://sqlalche.me/e/20/f405)
[31mERROR[0m:    2025-12-12 15:25:01,865 - app - Query failed with: {e}
Traceback (most recent call last):
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 514, in _prepare_and_execute
    prepared_stmt, attributes = await adapt_connection._prepare(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 760, in _prepare
    prepared_stmt = await self._connection.prepare(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/asyncpg/connection.py", line 636, in prepare
    return await self._prepare(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/asyncpg/connection.py", line 654, in _prepare
    stmt = await self._get_statement(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/asyncpg/connection.py", line 433, in _get_statement
    statement = await self._protocol.prepare(
  File "asyncpg/protocol/protocol.pyx", line 166, in prepare
asyncpg.exceptions.UndefinedFunctionError: operator does not exist: integer = character varying
HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 572, in execute
    self._adapt_connection.await_(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 550, in _prepare_and_execute
    self._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 501, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 784, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.ProgrammingError: <class 'asyncpg.exceptions.UndefinedFunctionError'>: operator does not exist: integer = character varying
HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/app/domains/posts/repository.py", line 123, in get_image
    result = await self.db.execute(select(Post).where(Post.id == post_id))
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/ext/asyncio/session.py", line 461, in execute
    result = await greenlet_spawn(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2236, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
    result = conn.execute(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2353, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 572, in execute
    self._adapt_connection.await_(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 550, in _prepare_and_execute
    self._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 501, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 784, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.ProgrammingError: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedFunctionError'>: operator does not exist: integer = character varying
HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
[SQL: SELECT posts.id, posts.user_id, posts.caption, posts.created_at, posts.file_name, posts.image_data 
FROM posts 
WHERE posts.id = $1::VARCHAR]
[parameters: ('39',)]
(Background on this error at: https://sqlalche.me/e/20/f405)
[31mERROR[0m:    2025-12-12 15:25:01,866 - app - Failed to retrieve image: {e}
Traceback (most recent call last):
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 514, in _prepare_and_execute
    prepared_stmt, attributes = await adapt_connection._prepare(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 760, in _prepare
    prepared_stmt = await self._connection.prepare(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/asyncpg/connection.py", line 636, in prepare
    return await self._prepare(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/asyncpg/connection.py", line 654, in _prepare
    stmt = await self._get_statement(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/asyncpg/connection.py", line 433, in _get_statement
    statement = await self._protocol.prepare(
  File "asyncpg/protocol/protocol.pyx", line 166, in prepare
asyncpg.exceptions.UndefinedFunctionError: operator does not exist: integer = character varying
HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 572, in execute
    self._adapt_connection.await_(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 550, in _prepare_and_execute
    self._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 501, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 784, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.ProgrammingError: <class 'asyncpg.exceptions.UndefinedFunctionError'>: operator does not exist: integer = character varying
HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/app/domains/posts/repository.py", line 123, in get_image
    result = await self.db.execute(select(Post).where(Post.id == post_id))
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/ext/asyncio/session.py", line 461, in execute
    result = await greenlet_spawn(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2236, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
    result = conn.execute(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2353, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 572, in execute
    self._adapt_connection.await_(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 550, in _prepare_and_execute
    self._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 501, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 784, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.ProgrammingError: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedFunctionError'>: operator does not exist: integer = character varying
HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
[SQL: SELECT posts.id, posts.user_id, posts.caption, posts.created_at, posts.file_name, posts.image_data 
FROM posts 
WHERE posts.id = $1::VARCHAR]
[parameters: ('39',)]
(Background on this error at: https://sqlalche.me/e/20/f405)
[31mERROR[0m:    2025-12-12 15:25:01,868 - app - Query failed with: {e}
Traceback (most recent call last):
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 514, in _prepare_and_execute
    prepared_stmt, attributes = await adapt_connection._prepare(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 760, in _prepare
    prepared_stmt = await self._connection.prepare(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/asyncpg/connection.py", line 636, in prepare
    return await self._prepare(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/asyncpg/connection.py", line 654, in _prepare
    stmt = await self._get_statement(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/asyncpg/connection.py", line 433, in _get_statement
    statement = await self._protocol.prepare(
  File "asyncpg/protocol/protocol.pyx", line 166, in prepare
asyncpg.exceptions.UndefinedFunctionError: operator does not exist: integer = character varying
HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 572, in execute
    self._adapt_connection.await_(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 550, in _prepare_and_execute
    self._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 501, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 784, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.ProgrammingError: <class 'asyncpg.exceptions.UndefinedFunctionError'>: operator does not exist: integer = character varying
HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/app/domains/posts/repository.py", line 123, in get_image
    result = await self.db.execute(select(Post).where(Post.id == post_id))
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/ext/asyncio/session.py", line 461, in execute
    result = await greenlet_spawn(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2236, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
    result = conn.execute(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2353, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 572, in execute
    self._adapt_connection.await_(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 550, in _prepare_and_execute
    self._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 501, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 784, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.ProgrammingError: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedFunctionError'>: operator does not exist: integer = character varying
HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
[SQL: SELECT posts.id, posts.user_id, posts.caption, posts.created_at, posts.file_name, posts.image_data 
FROM posts 
WHERE posts.id = $1::VARCHAR]
[parameters: ('40',)]
(Background on this error at: https://sqlalche.me/e/20/f405)
[31mERROR[0m:    2025-12-12 15:25:01,869 - app - Failed to retrieve image: {e}
Traceback (most recent call last):
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 514, in _prepare_and_execute
    prepared_stmt, attributes = await adapt_connection._prepare(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 760, in _prepare
    prepared_stmt = await self._connection.prepare(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/asyncpg/connection.py", line 636, in prepare
    return await self._prepare(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/asyncpg/connection.py", line 654, in _prepare
    stmt = await self._get_statement(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/asyncpg/connection.py", line 433, in _get_statement
    statement = await self._protocol.prepare(
  File "asyncpg/protocol/protocol.pyx", line 166, in prepare
asyncpg.exceptions.UndefinedFunctionError: operator does not exist: integer = character varying
HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 572, in execute
    self._adapt_connection.await_(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 550, in _prepare_and_execute
    self._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 501, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 784, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.ProgrammingError: <class 'asyncpg.exceptions.UndefinedFunctionError'>: operator does not exist: integer = character varying
HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/app/domains/posts/repository.py", line 123, in get_image
    result = await self.db.execute(select(Post).where(Post.id == post_id))
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/ext/asyncio/session.py", line 461, in execute
    result = await greenlet_spawn(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2236, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
    result = conn.execute(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2353, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 572, in execute
    self._adapt_connection.await_(
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 550, in _prepare_and_execute
    self._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 501, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/vinstagram/lib/python3.10/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 784, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.ProgrammingError: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedFunctionError'>: operator does not exist: integer = character varying
HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.
[SQL: SELECT posts.id, posts.user_id, posts.caption, posts.created_at, posts.file_name, posts.image_data 
FROM posts 
WHERE posts.id = $1::VARCHAR]
[parameters: ('40',)]
(Background on this error at: https://sqlalche.me/e/20/f405)
[31mERROR[0m:    2025-12-12 15:28:23,526 - app - Failed to retrieve image: {e}
Traceback (most recent call last):
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/app/domains/posts/repository.py", line 141, in get_image
    raise HTTPException(status_code=404, detail="Image file missing on server")
fastapi.exceptions.HTTPException: 404: Image file missing on server
[31mERROR[0m:    2025-12-12 15:28:23,528 - app - Failed to retrieve image: {e}
Traceback (most recent call last):
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/app/domains/posts/repository.py", line 141, in get_image
    raise HTTPException(status_code=404, detail="Image file missing on server")
fastapi.exceptions.HTTPException: 404: Image file missing on server
[31mERROR[0m:    2025-12-12 15:28:40,348 - app - Failed to retrieve image: {e}
Traceback (most recent call last):
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/app/domains/posts/repository.py", line 141, in get_image
    raise HTTPException(status_code=404, detail="Image file missing on server")
fastapi.exceptions.HTTPException: 404: Image file missing on server
[31mERROR[0m:    2025-12-12 15:28:40,389 - app - Failed to retrieve image: {e}
Traceback (most recent call last):
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/app/domains/posts/repository.py", line 141, in get_image
    raise HTTPException(status_code=404, detail="Image file missing on server")
fastapi.exceptions.HTTPException: 404: Image file missing on server
[31mERROR[0m:    2025-12-12 15:28:40,446 - app - Failed to retrieve image: {e}
Traceback (most recent call last):
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/app/domains/posts/repository.py", line 141, in get_image
    raise HTTPException(status_code=404, detail="Image file missing on server")
fastapi.exceptions.HTTPException: 404: Image file missing on server
[31mERROR[0m:    2025-12-12 15:28:40,545 - app - Failed to retrieve image: {e}
Traceback (most recent call last):
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/app/domains/posts/repository.py", line 141, in get_image
    raise HTTPException(status_code=404, detail="Image file missing on server")
fastapi.exceptions.HTTPException: 404: Image file missing on server
[31mERROR[0m:    2025-12-12 15:28:40,731 - app - Failed to retrieve image: {e}
Traceback (most recent call last):
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/app/domains/posts/repository.py", line 141, in get_image
    raise HTTPException(status_code=404, detail="Image file missing on server")
fastapi.exceptions.HTTPException: 404: Image file missing on server
[31mERROR[0m:    2025-12-12 15:28:40,765 - app - Failed to retrieve image: {e}
Traceback (most recent call last):
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/app/domains/posts/repository.py", line 141, in get_image
    raise HTTPException(status_code=404, detail="Image file missing on server")
fastapi.exceptions.HTTPException: 404: Image file missing on server
[31mERROR[0m:    2025-12-12 15:28:40,817 - app - Failed to retrieve image: {e}
Traceback (most recent call last):
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/app/domains/posts/repository.py", line 139, in get_image
    if not os.path.exists(post.file_name):
  File "/Users/rodo/.pyenv/versions/3.10.16/lib/python3.10/genericpath.py", line 19, in exists
    os.stat(path)
TypeError: stat: path should be string, bytes, os.PathLike or integer, not NoneType
[31mERROR[0m:    2025-12-12 15:28:40,846 - app - Failed to retrieve image: {e}
Traceback (most recent call last):
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/app/domains/posts/repository.py", line 141, in get_image
    raise HTTPException(status_code=404, detail="Image file missing on server")
fastapi.exceptions.HTTPException: 404: Image file missing on server
[31mERROR[0m:    2025-12-12 15:28:40,881 - app - Failed to retrieve image: {e}
Traceback (most recent call last):
  File "/Users/rodo/Desktop/instagram_design/instagram_clone/app/domains/posts/repository.py", line 141, in get_image
    raise HTTPException(status_code=404, detail="Image file missing on server")
fastapi.exceptions.HTTPException: 404: Image file missing on server
